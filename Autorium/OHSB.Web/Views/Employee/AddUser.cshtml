@model OHSB.Domain.EmployeeMaster.EmployeeEntity
@{
    ViewData["Title"] = "AddUser";
    Layout = "~/Views/Shared/_LayoutDynamic.cshtml";
}
<div class="page-title">
    <div class="title-details">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb p-0 mb-0 bg-transparent" id="navigation">
            </ol>
        </nav>
    </div>
</div>
<div class="row">
    <div class="col-md-12 col-sm-12">
        <div class="card">
            <div class="card-header">
                <ul class="nav nav-tabs nav-fill" role="tablist">
                    <a class="nav-item nav-link active" asp-controller="Employee" asp-action="AddUser">AddUser</a>
                    <a class="nav-item nav-link " asp-controller="Employee" asp-action="ViewUser">ViewUser</a>
                </ul>
                <div class="indicatorslist">
                    <a title="" href="javascript:void(0)" id="backIcon" data-toggle="tooltip" data-placement="top" data-original-title="Back"><i class="icon-arrow-left1"></i></a>
                    <p class="ml-2">(*) Indicates mandatory </p>
                </div>
            </div>
            <!-- BASIC FORM ELEMENTS -->
            <!--===================================================-->
            <div class="card-body">
                <div class="row">
                    <div class="form-group col-md-3">
                        <label class="control-label">AuditoriumName<span class="text-danger">*</span></label>
                        <select id="ddlAuditorium" class="form-control" asp-items="@(new SelectList(ViewBag.AuditoriumID,"AuditoriumID","AuditoriumName"))" asp-for="AuditoriumID">
                            <option value="0">--Select--</option>
                        </select>
                    </div>
                    <div class="form-group col-md-3">
                        <label class="control-label">Department Name<span class="text-danger">*</span></label>
                        <select id="ddlDepartMent" class="form-control" asp-items="@(new SelectList(ViewBag.DepartmentId,"DepartmentId","Department"))" asp-for="DepartmentId">
                            <option value="0">--Select--</option>
                        </select>
                    </div>
                    <div class="form-group col-md-3">
                        <label class="control-label">Designation Name<span class="text-danger">*</span></label>
                        <select id="ddlDesignation" class="form-control" asp-items="@(new SelectList(ViewBag.DesignationId,"DesignationId","Designation"))" asp-for="DesignationId">
                            <option value="0">--Select--</option>
                        </select>


                    </div>
                    <div class="form-group col-md-3">
                        <label class="control-label">Role Name<span class="text-danger">*</span></label>
                        <select id="ddlRoll" class="form-control" asp-items="@(new SelectList(ViewBag.RollID,"RollID","RollName"))" asp-for="RollID">
                            <option value="0">--Select--</option>
                        </select>
                    </div>

                </div>

                <div class="row">
                    <div class="form-group col-md-3">
                        <label class="control-label">Name<span class="text-danger">*</span></label>
                        <input id="Name" class="form-control" />
                        <span id="lblErrorName" style="color:red"></span>
                    </div>

                    <div class="form-group col-md-3">
                        <label class="control-label">Email<span class="text-danger">*</span></label>
                        <input id="Email" type="email" class="form-control" />
                        <span id="lblError" style="color:red"></span>
                    </div>
                    <div class="form-group col-md-3">
                        <label class="control-label" type="number">Mobile<span class="text-danger">*</span></label>
                        <input id="Mobile" class="form-control" />
                        <span id="lblErrorPhone" style="color:red"></span>
                    </div>
                    <div class="form-group col-md-3">
                        <label class="control-label">Gender<span class="text-danger">*</span></label>
                        <select class="form-control" id="Gender">
                            <option value="0">Select</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Other">Other</option>
                        </select>

                    </div>
                </div>
                <div class="row">
                   
                    <div class="form-group col-md-3">
                        <label class="control-label">Age<span class="text-danger">*</span></label>
                        <input type="text" id="Age" class="form-control ">
                    </div>

                    <div class="form-group col-md-3">
                        <label class="control-label">Address<span class="text-danger">*</span></label>
                        <input type="text" id="Address" class="form-control" />

                    </div>
                    <div class="form-group col-md-3">
                        <label class="control-label">City<span class="text-danger">*</span></label>
                        <input id="City" class="form-control" />


                    </div>

                </div>
                <div class="row">

                    <div class="form-group col-md-3">
                        <label class="control-label">UserName<span class="text-danger">*</span></label>
                        <input id="UserId" class="form-control" />
                        <span id="lblErrorUserId" style="color:red"></span>
                    </div>
                    <div class="form-group col-md-3">
                        <label class="control-label">Password<span class="text-danger">*</span></label>
                        <input id="Password" class="form-control" />
                        <span id="lblErrorPassward" style="color:red"></span>
                    </div>
                    <div class="form-group col-md-3">
                        <label class="control-label">Confirm Password<span class="text-danger">*</span></label>
                        <input id="Passwordconfirm" class="form-control" />
                    </div>
                </div>



            </div>


            <div class="form-group col-md-4">

                <input id="id" class="form-control" hidden />
            </div>
            <div class="form-group row">
                <label class="col-12 col-md-2 col-xl-2 control-label"></label>
                <div class="col-12 col-md-6 col-xl-4 justify-content-center">
                    <button class="btn btn-primary mb-1" id="btnSubmit">Submit</button>
                    <button class="btn btn-danger mb-1" id="btnCancel">Reset</button>
                    @*<button class="btn btn-danger mb-1" id="btnCancel11" disabled>Resetttt</button>*@
                </div>
            </div>
        </div>
        <!--===================================================-->
        <!-- END BASIC FORM ELEMENTS -->
    </div>
</div>
<script src="~/validation/validation.js"></script>
<script>
    $(document).ready(function () {
        //breadcumb
        loadNavigation('AddUser', 'gldata', 'plsubmission', 'AddUser', '', 'AddUser');
        var UserId = getUrlVars()["UserId"];
        if (UserId != undefined) {
            $("#btnSubmit").html("Update");
            $("#btnCancel").html("Cancel");
            Edit(UserId)
        }

    });

</script>

<script type="text/javascript">

    $("#btnSubmit").click(function () {
        var doc = {
            UserId: $("#id").val(),
            UserName: $("#UserId").val(),
            Password: $("#Password").val(),
            Passwordconfirm: $("#Passwordconfirm").val(),
            FullName: $("#Name").val(),
            Email: $("#Email").val(),
            Mobile: $("#Mobile").val(),
            Gender: $("#Gender").val(),
            Address: $("#Address").val(),
            City: $("#City").val(),
            Age: $("#Age").val(),
            DesignationId: $("#ddlDesignation").val(),
            DepartmentId: $("#ddlDepartMent").val(),
            RollID: $("#ddlRoll").val(),
            AuditoriumID: $("#ddlAuditorium").val()
        };
        if (confirm("Are you sure you want to Submit ?")) {
            if ($("#Password").val() == $("#Passwordconfirm").val()) {
                $.ajax({
                    url: "/Employee/AddUser",
                    data: doc,
                    type: "POST",
                    success: function (result) {
                        if (getUrlVars()["UserId"] != undefined) {
                            alert(result)
                            location.href = "/Employee/ViewUser";
                        }
                        else
                            alert(result);
                        location.href = "/Employee/ViewUser";
                        reset();

                    },
                    error: function (errormessage) {
                        alert(errormessage.responseText);
                    }
                });
            }

        }

    });



    $("#btnCancel").click(function () {
        if ($("#id").val() != '') {
            window.location.href = "/Employee/ViewUser";
        }
        else
            reset();
    })
    function reset() {
        $('#id').val("");
        $('#UserId').val("");
        $('#Password').val("");
        $('#Passwordconfirm').val("");
        $('#Name').val("");
        $('#Email').val("");
        $('#Mobile').val("");
        $('#Gender').val("0");
        $('#Address').val("");
        $('#City').val("");
        $('#Age').val("");
        $('#ddlDesignation').val("0");
        $('#ddlDepartMent').val("0");
        $('#ddlRoll').val("0");
        $('#ddlAuditorium').val("0");

    }

    //UPDATE
    function Edit(UserId) {

        $.ajax({
            url: "/Employee/Getbyid?UserId=" + UserId,
            type: "GET",
            contentType: "application/json;charset=UTF-8",
            dataType: "json",
            success: function (Result) {
                $('#id').val(Result.UserId);
                $('#UserId').val(Result.UserName);
                $('#Password').val(Result.Password);
                $('#Passwordconfirm').val(Result.Password);
                $('#Name').val(Result.FullName);
                $('#Email').val(Result.Email);
                $('#Mobile').val(Result.Mobile);
                $('#Gender').val(Result.Gender);
                $('#Address').val(Result.Address);
                $('#City').val(Result.City);
                $('#Age').val(Result.Age);
                $('#ddlDesignation').val(Result.DesignationId);
                $('#ddlDepartMent').val(Result.DepartmentId);
                $('#ddlRoll').val(Result.RollID);
                $('#ddlAuditorium').val(Result.AuditoriumID);
            },
            error: function (errormessage) {
                alert(errormessage.responseText);
            }
        });
        return false;
    }
</script>

